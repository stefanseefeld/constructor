

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview - Faber 1.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    './',
          VERSION:     '1.0',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="Faber 1.0 documentation" href="index.html" />
    <link rel="next" title="Faber Tutorial" href="tutorial/index.html" />
    <link rel="prev" title="Faber documentation" href="index.html" /> 
  </head>
  <body>
    <div class="header">
    <table border="0" cellpadding="7" cellspacing="0" width="100%" summary=
    "header">
      <tr>
        <td valign="top" width="300">
          <h3><a href="index.html"><img 
          alt="C++ Boost" src="_static/logo.png" border="0"></a></h3>
        </td>
	<td>
      <div id="searchbox" style="display: none">
        <form class="search" action="search.html" method="get">
          <input type="text" name="q" size="18" />
          <input type="submit" value="Search" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
      </div>
      <script type="text/javascript">$('#searchbox').show(0);</script>
	</td>
      </tr>
    </table>
    </div>
    <hr/>
    <div class="content">
    <div class="navbar" style="text-align:right;">
      
      
      <a class="prev" title="Faber documentation" href="index.html"><img src="_static/prev.png" alt="prev"/></a>
      <a class="next" title="Faber Tutorial" href="tutorial/index.html"><img src="_static/next.png" alt="next"/></a>
      
    </div>
      
  <div class="section" id="overview">
<h1>Overview</h1>
<div class="section" id="basic-usage">
<h2>Basic usage</h2>
<p>A <cite>Faber</cite> build process is encoded in one or more <cite>fabscripts</cite> that describe a set
of <cite>artefacts</cite> that may be constructed using <cite>recipes</cite> from other artefacts
(including existing input or source files). <cite>Faber</cite> will read those fabscripts to
assemble a dependency graph and perform the actions necessary to construct either
goals expressed as command-line arguments, or any default artefacts if no goals were
specified. features may be specified on the command-line as options to influence
the exact properties of the build process (e.g., <cite>cxx.name=g++</cite> may be used to
select a particular compiler, or <cite>target.arch=x86</cite> to select a specific target
architecture.</p>
</div>
<div class="section" id="hello-world">
<h2>Hello World !</h2>
<p>Consider this ubiquitous C++ file:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Hello World !&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>which we want to compile into a <cite>hello</cite> binary. Here is the associated <cite>fabscript</cite>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">faber.artefacts.binary</span> <span class="kn">import</span> <span class="n">binary</span>
<span class="kn">from</span> <span class="nn">faber.test</span> <span class="kn">import</span> <span class="n">test</span>

<span class="n">hello</span> <span class="o">=</span> <span class="n">binary</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;hello.cpp&#39;</span><span class="p">)</span>
<span class="n">test_hello</span> <span class="o">=</span> <span class="n">test</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">hello</span><span class="p">,</span> <span class="n">run</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">default</span> <span class="o">=</span> <span class="n">hello</span>
</pre></div>
</div>
<p>The above defines two <a class="reference internal" href="glossary.html#term-artefact"><span class="xref std std-term">artefact</span></a>s <cite>hello</cite>, and <cite>test</cite>, then identifies 'hello'
to be built by default.</p>
</div>
<div class="section" id="building-it">
<h2>Building it</h2>
<p>To build the <cite>hello</cite> binary, simply run <strong class="command">faber</strong> from within the
directory containing the <cite>hello.cpp</cite> source file and the <cite>fabscript</cite>.
This may produce output such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gxx.compile hello.o
gxx.link hello
</pre></div>
</div>
<p>You may also want to perform the test (which in the above example simply consists
in running the binary), by running <strong class="command">faber test</strong>, which should produce output
such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>run test
Hello World !

test: PASS
</pre></div>
</div>
<p>Finally, you can clean up all the generated files by executing <strong class="command">faber -c</strong>.</p>
<p>To use a separate build directory you can use the <cite>--builddir</cite> option. Likewise,
you may use <cite>--srcdir</cite> if the source tree isn't in the current location.</p>
<p>The above is a very simple example of how to use <cite>faber</cite> to build and test a binary
from C++ source code. Notice that the build logic is fully portable, i.e. does not
depend on any platform-specific compiler toolchain. End-users however typically
want to control what compiler is used in the build process.
So while <cite>faber</cite> tries to find appropriate tools able to perform the requested
task, it also provides user control over what toolchain to use, or what flags
to pass.
So with the appropriate toolchains installed on the build machine, it is possible
to use</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>faber cxx.name=g++
</pre></div>
</div>
<p>or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>faber cxx.name=clang++
</pre></div>
</div>
<p>to pick a named compiler,
or</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>faber target.arch=w64
</pre></div>
</div>
<p>to pick the target architecture if you want to cross-compile a project.</p>
</div>
</div>


    <div class="navbar" style="text-align:right;">
      
      
      <a class="prev" title="Faber documentation" href="index.html"><img src="_static/prev.png" alt="prev"/></a>
      <a class="next" title="Faber Tutorial" href="tutorial/index.html"><img src="_static/next.png" alt="next"/></a>
      
    </div>
    </div>
    <div class="footer">
      <p>last updated Feb 07, 2021</p>
    </div>
  </body>
</html>